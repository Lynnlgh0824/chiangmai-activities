# 移动端原型交互说明文档

**原型文件**: `prototypes/mobile-homepage.pen`
**设备**: iPhone 12 Pro (375x812px)
**创建时间**: 2026-01-29
**访问地址**: http://localhost:3000

---

## ⚠️ 需要修复的问题

### 问题1: 左侧重复的时间内容
**问题**: 从截图看，左侧重复的时间区域对应 `div.day-detail-header` 元素
**解决方案**: 给这个元素添加 `display: none;` 样式

```css
/* 隐藏左侧重复的时间内容 */
.day-detail-header {
    display: none !important;
}
```

### 问题2: 日历视图显示过大
**问题**: 日历视图视觉上过大，可能是以下原因：
1. `#calendarGrid` 的 `grid-template-columns` 相关样式
2. `.tab-pane.active` 的 `padding-top: 200px`（这个值明显偏大）

**解决方案**:
```css
/* 修复tab-pane的padding-top */
.tab-pane.active {
    padding-top: 200px !important; /* 这个值需要调整 */
}

/* 或者使用CSS变量 */
.tab-pane.active {
    padding-top: var(--space-tab-padding-std) !important; /* 约270-290px */
}
```

**建议**: 将 `padding-top` 改为更合理的值，约为：
- 搜索框: 65px
- Tab导航: 50px
- 日期筛选栏: 140px
- 筛选状态提示: 36px
- **总计**: 约291px

---

## 📱 原型截图

### 1. 主页原型
![移动端主页原型](https://maas-log-prod.cn-wlcb.ufileos.com/anthropic/bdd24393-02ee-43f2-81a8-b4f661d57bf8/228d72994f373e8186caf4a10d4b8751.png?UCloudPublicKey=TOKEN_e15ba47a-d098-4fbd-9afc-a0dcf0e4e621&Expires=1769680796&Signature=gxZSPnQol54j3ycEjIwCfS9MDtE=)

### 2. 筛选弹窗原型
![移动端筛选弹窗原型](https://maas-log-prod.cn-wlcb.ufileos.com/anthropic/bdd24393-02ee-43f2-81a8-b4f661d57bf8/7a8bdcdc0e865c50c3024667149965ec.png?UCloudPublicKey=TOKEN_e15ba47a-d098-4fbd-9afc-a0dcf0e4e621&Expires=1769681118&Signature=1hARehmhsaE6m7e+kNtnBPYhN9Y=)

---

## 🎯 设计概览

### 页面结构（从上到下）

| 层级 | 组件 | 高度 | 定位方式 | 功能 |
|------|------|------|---------|------|
| **1** | 状态栏 | 44px | Fixed | 显示时间、信号、电池 |
| **2** | 搜索框区域 | 65px | Fixed | 搜索活动、地点 |
| **3** | Tab导航 | 50px | Fixed | 切换功能分类 |
| **4** | 日期筛选栏 | 140px | Fixed | 选择日期筛选活动 |
| **5** | 筛选状态提示 | 36px | Fixed | 显示当前筛选状态 |
| **6** | 活动列表 | 477px | Scrollable | 显示活动卡片列表 |
| **7** | 浮动筛选按钮 | 54x54px | Fixed (右下角) | 打开筛选弹窗 |

**总高度**: 812px（iPhone 12 Pro屏幕高度）

---

## 🔍 核心交互说明

### 1. 搜索框区域

#### 位置与尺寸
- **位置**: 固定在页面最顶部（状态栏下方）
- **尺寸**: 351x44px（左右留12px边距）
- **样式**: 白色圆角框，紫色渐变背景

#### 交互效果
```
用户操作序列:
1. 点击搜索框
   → 激活输入状态
   → 键盘从底部滑出
   → 搜索图标变紫色（#667eea）

2. 输入关键词
   → 实时搜索（防抖300ms）
   → 活动列表实时更新
   → 显示匹配结果数量

3. 点击清空按钮（×）
   → 清空搜索内容
   → 显示所有活动
   → 收起键盘

4. 按下键盘"搜索"
   → 触发搜索
   → 收起键盘
   → 显示搜索结果
```

#### 视觉状态
- **默认状态**: 灰色占位符 "搜索活动、地点..."
- **激活状态**: 占位符消失，光标闪烁
- **输入状态**: 显示清空按钮（×）
- **搜索结果**: 显示 "找到X个活动" 提示

---

### 2. Tab导航栏

#### 位置与尺寸
- **位置**: 固定在搜索框下方（top: 109px）
- **尺寸**: 375x50px
- **布局**: 横向排列，可滚动
- **Tab宽度**: 75px（等宽）

#### Tab列表
| Tab | 状态 | 说明 |
|-----|------|------|
| **兴趣班** | Active | 默认选中，紫色背景 |
| **市集** | Inactive | 白色背景 |
| **音乐** | Inactive | 白色背景 |
| **灵活时间** | Inactive | 白色背景 |
| **网站** | Inactive | 白色背景 |

#### 交互效果
```
用户点击Tab:
1. 点击"市集"Tab
   → 当前Tab变为未选中
   → "市集"Tab变为选中（紫色背景）
   → 活动列表更新为市集活动
   → 筛选分类自动更新（市集无分类筛选）
   → 触觉反馈（振动10ms）

2. 再次点击"兴趣班"Tab
   → 返回兴趣班Tab
   → 筛选分类恢复显示
   → 活动列表恢复显示兴趣班活动
```

#### 横向滚动
- **触发条件**: Tab数量超过屏幕宽度
- **滚动方式**: 触摸滑动
- **回弹效果**: 有（iOS风格）
- **滚动条**: 隐藏但可滚动

---

### 3. 日期筛选栏

#### 位置与尺寸
- **位置**: 固定在Tab导航下方（top: 159px）
- **尺寸**: 375x140px
- **背景**: 紫色渐变 (#667eea → #764ba2)

#### 日期按钮布局
- **布局方式**: 3列网格布局
- **按钮尺寸**: 111x92px
- **间距**: 4px（gap）
- **圆角**: 12px

#### 日期按钮结构
```
┌─────────────┐
│     26      │ ← 20px，粗体，数字
│   周一 ✓    │ ← 11px，常规，星期+对勾
└─────────────┘
```

#### 视觉状态

**未选中状态**:
- 背景色: #7c8ef5（浅紫色）
- 边框: 1px solid #667eea
- 文字颜色: 白色
- 阴影: 无

**选中状态** (周一示例):
- 背景色: 金色渐变 (#ffd700 → #ffed4e)
- 边框: 3px solid #ff9800（橙色粗边框）
- 文字颜色: #333333（深色）
- 对勾标记: 显示 ✓
- 缩放: scale(1.05)（放大5%）
- 阴影: 0 4px 12px rgba(255, 152, 0, 0.3)

#### 交互效果
```
用户点击日期按钮:
1. 点击"周二"按钮
   → "周一"按钮恢复未选中
   → "周二"按钮变为选中（金色背景）
   → 筛选状态提示更新
   → 活动列表平滑滚动到周二组
   → 周二组高亮（金色渐变）
   → 触觉反馈（振动10ms）

2. 再次点击"周二"按钮
   → 取消筛选
   → 所有日期按钮恢复未选中
   → 筛选状态提示消失
   → 活动列表显示所有活动
   → 启用滚动自动选中功能
```

#### 动画效果
- **选中动画**: 缩放动画（200ms ease-out）
- **背景切换**: 渐变过渡（300ms ease）
- **边框动画**: 从1px → 3px（150ms ease）
- **对勾标记**: 淡入+向上滑动（250ms ease）

---

### 4. 筛选状态提示栏

#### 位置与尺寸
- **位置**: 固定在日期筛选栏下方（top: 299px）
- **尺寸**: 375x36px
- **背景**: #fff3e0（浅橙色）
- **边框**: 1px solid #ffb74d

#### 内容显示
```
📅 显示周一的活动      [清除]
```

#### 交互效果
```
显示条件:
- 有日期筛选时显示
- 无筛选时隐藏（display: none）

交互逻辑:
1. 显示筛选状态
   → 提示文字: "📅 显示周X的活动"
   → 背景色: 浅橙色 (#fff3e0)
   → 动画: 从顶部滑入（200ms ease）

2. 点击"清除"按钮
   → 移除日期筛选
   → 状态栏消失
   → 活动列表恢复显示所有活动
   → 触觉反馈（振动10ms）
```

#### 清除按钮样式
- **尺寸**: 79x24px
- **背景**: 白色
- **边框**: 1px solid #ffb74d
- **圆角**: 12px
- **文字**: "清除"（橙色 #f57c00）
- **触摸反馈**: 按下时缩小到95%

---

### 5. 活动列表

#### 位置与尺寸
- **位置**: 筛选状态栏下方
- **尺寸**: 375x477px
- **背景**: #f8f9fa（浅灰色）
- **滚动**: 可滚动

#### 活动分组显示

**选中日期组** (周一示例):
```
┌────────────────────────────┐
│ 📅 周一 (3个活动)           │ ← 组标题，金色背景
├────────────────────────────┤
│ ┌────────────────────────┐ │
│ │ 09:00                  │ │ ← 活动卡片1
│ │ ⭐ 瑜伽晨练            │ │
│ │ 📍 Yoga Plus Studio    │ │
│ └────────────────────────┘ │
│ ┌────────────────────────┐ │
│ │ 14:00                  │ │ ← 活动卡片2
│ │ ⭐ 泰拳训练            │ │
│ │ 📍 Tiger Muay Thai     │ │
│ └────────────────────────┘ │
│ ┌────────────────────────┐ │
│ │ 18:30                  │ │ ← 活动卡片3
│ │ ⭐ 冥想课程            │ │
│ │ 📍 Mindfulness Centre  │ │
│ └────────────────────────┘ │
└────────────────────────────┘
     ↑ 金色渐变背景
     ↑ Sticky定位（固定在顶部）
```

**未选中日期组** (周二示例):
```
┌────────────────────────────┐
│ 📅 周二 (2个活动)           │ ← 组标题，灰色背景
├────────────────────────────┤
│ ┌────────────────────────┐ │
│ │ 10:00                  │ │ ← 活动卡片4
│ │ 健身训练               │ │
│ └────────────────────────┘ │
│ ┌────────────────────────┐ │
│ │ 16:00                  │ │ ← 活动卡片5
│ │ 文化艺术课             │ │
│ └────────────────────────┘ │
└────────────────────────────┘
     ↑ 浅灰色背景 (#f8f9fa)
```

#### 活动卡片样式
- **尺寸**: 335x68px（选中）/ 335x60px（未选中）
- **背景**: 白色
- **圆角**: 8px
- **边框**: 1px solid #e0e0e0
- **间距**: 8px（gap）

#### 卡片信息层级
```
时间: 09:00          ← 14px，紫色，粗体
标题: ⭐ 瑜伽晨练    ← 15px，黑色，粗体
地点: 📍 Yoga Plus   ← 12px，灰色，常规
```

#### Sticky定位效果
```
选中日期组（周一）的Sticky行为:

滚动到顶部时:
┌────────────────────────────┐
│ 搜索框         (Fixed)     │ ← top: 0
│ Tab导航        (Fixed)     │ ← top: 65px
│ 日期筛选栏     (Fixed)     │ ← top: 115px
│ 筛选状态提示   (Fixed)     │ ← top: 255px
├────────────────────────────┤
│ 📅 周一 (3个活动)  (Sticky)│ ← top: 291px，固定在这里
│ ┌────────────────────────┐ │
│ │ ⭐ 瑜伽晨练            │ │
│ └────────────────────────┘ │
│ ┌────────────────────────┐ │
│ │ ⭐ 泰拳训练            │ │
│ └────────────────────────┘ │
└────────────────────────────┘

继续滚动:
┌────────────────────────────┐
│ 搜索框         (Fixed)     │
│ Tab导航        (Fixed)     │
│ 日期筛选栏     (Fixed)     │
│ 筛选状态提示   (Fixed)     │
├────────────────────────────┤
│ 📅 周一 (3个活动)  (Sticky)│ ← 仍然固定在顶部
│ ┌────────────────────────┐ │
│ │ ⭐ 冥想课程            │ │ ← 最后一个卡片
│ └────────────────────────┘ │
├────────────────────────────┤
│ 📅 周二 (2个活动)          │ ← 未选中组，正常滚动
│ ┌────────────────────────┐ │
│ │ 健身训练               │ │
│ └────────────────────────┘ │
└────────────────────────────┘
```

#### 交互效果
```
用户点击活动卡片:
1. 点击任意活动卡片
   → 打开活动详情弹窗
   → 弹窗从底部滑出（Bottom Sheet）
   → 背景遮罩淡入
   → 显示完整活动信息

2. 弹窗内容
   → 活动标题
   → 活动描述
   → 时间和地点
   → 价格信息
   → 联系方式
   → 地图链接
   → "关闭"按钮

3. 关闭弹窗
   → 点击遮罩区域
   → 或点击"关闭"按钮
   → 弹窗向下滑出
   → 遮罩淡出
```

#### 高亮动画
```
选中日期后的高亮动画:

1. 点击"周一"按钮
2. 周一组背景变为金色渐变
3. 触发pulseHighlight动画:
   - 0%: scale(1) + box-shadow: none
   - 50%: scale(1.02) + box-shadow: 0 8px 24px rgba(255, 215, 0, 0.5)
   - 100%: scale(1) + box-shadow: 0 4px 16px rgba(255, 215, 0, 0.3)
4. 动画时长: 600ms
5. 缓动函数: ease
```

---

### 6. 浮动筛选按钮（FAB）

#### 位置与尺寸
- **位置**: 固定在右下角
- **尺寸**: 54x54px（圆形）
- **距离**: 底部38px，右侧16px
- **背景**: 紫色 (#667eea)
- **阴影**: 0 4px 12px rgba(102, 126, 234, 0.4)

#### 交互效果
```
用户点击筛选按钮:
1. 点击按钮
   → 触觉反馈（振动15ms）
   → 按钮缩放动画（scale: 1 → 0.95 → 1）
   → 筛选弹窗从底部滑出
   → 背景遮罩淡入

2. 筛选弹窗内容（兴趣班Tab）
   → 分类筛选: 运动、健身、冥想、泰拳、徒步、文化艺术、舞蹈、瑜伽
   → 价格筛选: 全部、免费、<500฿、<1000฿、<1500฿、>1500฿
   → "确认"按钮（底部）
   → "取消"按钮（底部）

3. 选择筛选条件
   → 点击分类chip
   → chip变为选中（紫色背景）
   → 点击价格chip
   → chip变为选中（紫色背景）

4. 点击"确认"
   → 应用筛选条件
   → 弹窗关闭
   → 活动列表更新
   → 显示筛选结果数量

5. 点击"取消"
   → 不应用筛选
   → 弹窗关闭
   → 活动列表不变
```

#### 按钮状态
- **默认状态**: 紫色背景，白色图标
- **按下状态**: 缩小到95%
- **有筛选条件**: 显示红色徽章（数字）
  - 例如: 筛选按钮右上角显示 "2"（表示有2个筛选条件）

#### 弹窗动画
```
打开弹窗:
- 弹窗: translateY(100%) → translateY(0)（300ms ease-out）
- 遮罩: opacity: 0 → opacity: 0.5（300ms ease-out）

关闭弹窗:
- 弹窗: translateY(0) → translateY(100%)（250ms ease-in）
- 遮罩: opacity: 0.5 → opacity: 0（250ms ease-in）
```

---

## 🎨 设计系统

### 颜色规范

| 用途 | 颜色值 | 说明 |
|------|--------|------|
| **主色调** | #667eea | 紫色，用于主按钮、选中状态 |
| **辅助色** | #764ba2 | 深紫色，用于渐变 |
| **金色（选中）** | #ffd700 | 金色，用于日期选中状态 |
| **金色渐变** | #ffed4e | 浅金色，用于渐变结束 |
| **橙色边框** | #ff9800 | 橙色，用于选中边框 |
| **背景色** | #f5f5f5 | 浅灰色，用于页面背景 |
| **卡片背景** | #ffffff | 白色，用于卡片背景 |
| **文字主色** | #333333 | 深灰色，用于标题 |
| **文字辅色** | #666666 | 中灰色，用于次要文字 |
| **文字提示** | #999999 | 浅灰色，用于占位符 |

### 字体规范

| 用途 | 字号 | 字重 | 行高 |
|------|------|------|------|
| **页面标题** | 16px | 600 (Semi-bold) | 1.3 |
| **组标题** | 15-16px | 600-700 (Bold) | 1.3 |
| **卡片标题** | 14-15px | 600 (Semi-bold) | 1.4 |
| **卡片信息** | 12-13px | 400 (Regular) | 1.5 |
| **按钮文字** | 13-15px | 500-600 (Medium) | 1.3 |
| **日期数字** | 18-20px | 700 (Bold) | 1.2 |
| **星期文字** | 11px | 500 (Medium) | 1.2 |

### 间距规范

| 间距 | 用途 | 数值 |
|------|------|------|
| **页面边距** | 左右边距 | 8-16px |
| **卡片间距** | 垂直间距 | 8-12px |
| **组间距** | 日期组之间 | 16px |
| **元素间距** | 卡片内元素 | 4-8px |
| **触摸目标** | 最小点击区域 | 44x44px |

### 圆角规范

| 用途 | 圆角值 |
|------|--------|
| **搜索框** | 22px |
| **日期按钮** | 12px |
| **活动卡片** | 8px |
| **清除按钮** | 12px |
| **浮动按钮** | 27px（圆形） |
| **弹窗** | 16px（顶部） |

### 阴影规范

| 用途 | 阴影值 |
|------|--------|
| **固定元素** | 0 2px 8px rgba(0, 0, 0, 0.15) |
| **浮动按钮** | 0 4px 12px rgba(102, 126, 234, 0.4) |
| **选中日期组** | 0 4px 16px rgba(255, 215, 0, 0.3) |
| **活动卡片** | 0 1px 3px rgba(0, 0, 0, 0.1) |
| **弹窗** | 0 -4px 16px rgba(0, 0, 0, 0.2) |

---

## ⚡ 动画规范

### 过渡时长
- **快速**: 150-200ms（用于按钮反馈）
- **标准**: 250-300ms（用于一般过渡）
- **慢速**: 400-600ms（用于复杂动画）

### 缓动函数
- **ease-out**: 用于进入动画
- **ease-in**: 用于退出动画
- **ease**: 用于一般过渡
- **spring**: 用于弹性效果

### 关键动画

#### 1. 日期选中动画
```css
@keyframes selectDate {
    0% {
        transform: scale(1);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(255, 152, 0, 0.4);
    }
    100% {
        transform: scale(1.05);
        box-shadow: 0 4px 16px rgba(255, 215, 0, 0.3);
    }
}
```

#### 2. 高亮脉冲动画
```css
@keyframes pulseHighlight {
    0% {
        transform: scale(1);
        opacity: 1;
    }
    50% {
        transform: scale(1.02);
        opacity: 0.95;
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}
```

#### 3. 弹窗滑入动画
```css
@keyframes slideUp {
    from {
        transform: translateY(100%);
    }
    to {
        transform: translateY(0);
    }
}
```

#### 4. 淡入动画
```css
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}
```

---

## 📐 布局计算

### 固定元素总高度
```
状态栏: 44px
搜索框: 65px
Tab导航: 50px
日期筛选栏: 140px
筛选状态提示: 36px
─────────────────
总计: 335px
```

### 活动列表可用高度
```
屏幕高度: 812px
固定元素: 335px
浮动按钮空间: 38px（底部留白）
─────────────────
可用高度: 477px
```

### 日期按钮尺寸计算
```
容器宽度: 375px
左右padding: 8px
可用宽度: 359px
列数: 3列
gap: 4px

计算:
(359 - (4 * 2)) / 3 = 117px
实际使用: 111px（留出6px余量）
```

---

## 🔄 滚动行为

### 滚动层次
1. **Tab导航横向滚动**: overflow-x: auto
2. **活动列表纵向滚动**: overflow-y: auto

### 滚动优化
- **iOS弹性滚动**: -webkit-overflow-scrolling: touch
- **滚动条隐藏**: scrollbar-width: none
- **滚动回弹**: 有（iOS原生）

### 滚动自动选中（H5特有）
```
触发条件:
- 移动端（≤768px）
- 周视图模式
- 未手动选择日期

检测逻辑:
1. 使用Intersection Observer监听日期组
2. 当某日期组占据屏幕50%以上时触发
3. 防抖500ms后自动选中该日期
4. 自动高亮对应日期按钮
5. 自动筛选活动列表
```

---

## 👆 触摸反馈

### 触觉反馈（Haptic Feedback）
```
不同交互的振动时长:
- Tab切换: 10ms（轻微）
- 日期选择: 10ms（轻微）
- 筛选按钮: 15ms（中等）
- 确认操作: 20ms（明显）
```

### 视觉反馈
```
触摸反馈层级:
1. 即时反馈（:active伪类）
   → 按钮缩小到95%
   → 背景色稍微变暗
   → 立即响应，无延迟

2. 状态反馈（CSS transition）
   → 背景色渐变（200-300ms）
   → 边框变化（150ms）
   → 缩放动画（200ms）

3. 结果反馈（JavaScript）
   → 列表更新
   → 状态提示
   → 滚动定位
```

---

## 🚀 性能优化

### 渲染优化
- **硬件加速**: transform和opacity使用GPU加速
- **避免重排**: 使用transform代替top/left
- **防抖**: 搜索输入防抖300ms
- **节流**: 滚动事件节流100ms

### 加载优化
- **懒加载**: 图片懒加载（Intersection Observer）
- **预加载**: 预加载下一页数据
- **缓存**: 本地存储筛选条件

---

## ✅ 可访问性

### 触摸目标
- **最小尺寸**: 44x44px（iOS/Android规范）
- **推荐尺寸**: 48x48px（更易点击）
- **实际实现**: 所有按钮≥44px

### 颜色对比度
- **文字对比度**: ≥4.5:1（WCAG AA标准）
- **按钮对比度**: ≥3:1（大文字）
- **选中状态**: 高对比度金色背景+深色文字

### 语义化标签
- 使用 `<button>` 而非 `<div>`（可访问）
- 添加 `aria-label` 属性
- 添加 `role` 属性
- 支持键盘导航（Tab键）

---

## 📝 测试清单

### 功能测试
- [ ] 搜索功能正常
- [ ] Tab切换正常
- [ ] 日期筛选正常
- [ ] 活动列表更新正常
- [ ] 浮动筛选按钮正常
- [ ] 筛选弹窗正常
- [ ] 活动详情弹窗正常

### 视觉测试
- [ ] 所有颜色符合规范
- [ ] 所有字体大小符合规范
- [ ] 所有间距符合规范
- [ ] 所有圆角符合规范
- [ ] 所有阴影符合规范

### 交互测试
- [ ] 触摸反馈灵敏
- [ ] 动画流畅不卡顿
- [ ] 滚动流畅
- [ ] 横向滚动正常
- [ ] Sticky定位正常

### 兼容性测试
- [ ] iOS Safari正常
- [ ] Android Chrome正常
- [ ] 不同屏幕尺寸正常
- [ ] 横屏/竖屏切换正常

---

## 🎯 设计亮点

### 1. 视觉层次清晰
- **固定顶部**: 搜索、Tab、日期筛选
- **可滚动内容**: 活动列表
- **浮动操作**: 筛选按钮
- 层次分明，不混乱

### 2. 选中状态突出
- **金色渐变**: 醒目的金色背景
- **橙色边框**: 粗边框强调
- **缩放效果**: 放大5%突出
- **对勾标记**: 明确的选中指示

### 3. Sticky定位
- **选中组固定**: 不会滚出视野
- **清晰导航**: 始终知道当前位置
- **平滑过渡**: 无缝滚动体验

### 4. 触摸反馈
- **即时响应**: 所有交互立即反馈
- **触觉振动**: 增强操作确认感
- **视觉变化**: 缩放、颜色、阴影变化

### 5. 响应式设计
- **3列布局**: 适合移动端
- **触摸目标**: ≥44px符合规范
- **滚动优化**: 流畅的触摸滚动

---

**文档完成时间**: 2026-01-29
**原型文件**: `prototypes/mobile-homepage.pen`
**访问地址**: http://localhost:3000

**核心特性**:
- ✅ 清晰的视觉层次
- ✅ 明确的选中状态
- ✅ 流畅的交互动画
- ✅ 符合移动端规范
- ✅ 优秀的触摸反馈
