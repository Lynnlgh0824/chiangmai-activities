#!/bin/bash
# Pre-commit é’©å­ - è‡ªåŠ¨åŒæ­¥æ•°æ®åˆ° public/data

echo "ğŸ”„ è‡ªåŠ¨åŒæ­¥ data â†’ public/data"

# æ£€æŸ¥æ˜¯å¦æœ‰ data ç›®å½•çš„æ›´æ”¹
if git diff --cached --name-only | grep -q "^data/"; then
    echo "ğŸ“ æ£€æµ‹åˆ° data/ ç›®å½•çš„æ›´æ”¹ï¼Œè‡ªåŠ¨åŒæ­¥åˆ° public/data/"

    # å¤åˆ¶æ•°æ®æ–‡ä»¶
    cp -f data/items.json public/data/ 2>/dev/null || true
    cp -f data/guide.json public/data/ 2>/dev/null || true

    # æ·»åŠ åˆ°æœ¬æ¬¡æäº¤
    git add public/data/items.json public/data/guide.json 2>/dev/null || true

    echo "âœ… æ•°æ®å·²åŒæ­¥"
fi
